<div id="new_law"></div>
<div class="app-content content container-fluid">
    <div class="content-wrapper">
        <div class="content-header row">
        <div class="content-header-left col-md-6 col-xs-12 mb-2">
          <div class="row breadcrumbs-top">
            <div class="breadcrumb-wrapper col-xs-12">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.php">الرئيسية</a>
                </li>
                <li class="breadcrumb-item"><a href="#">ادارة التشغيل</a>
                </li>
                <li class="breadcrumb-item"><a href="employees.php">الموظفين</a>
                </li>
                <li class="breadcrumb-item active">الحضور والانصراف
                </li>
              </ol>
            </div>
          </div>
          <h3 class="content-header-title mb-0">الحضور والانصراف</h3>
        </div>
        <div class="content-header-right col-md-6 col-xs-12">
            <div class="form-group" style="text-align: left">
                          <!-- button group -->

                          <div class="btn-group" role="group">
                              <div class="btn-group">
                                  <button type="button" class="btn btn-icon btn-secondary settings-btn"  aria-haspopup="true" aria-expanded="false">
                                    الاعدادات
                                    <i class="ft-cog icon-right"></i>
                                  </button>
                            <button type="button" class="btn btn-icon btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bars"></i></button>
                            <div class="dropdown-menu">
                              <a class="dropdown-item" href="employees_times">الحضور والانصراف</a>
                              <a class="dropdown-item" href="vacations">الأجازات</a>
                              <a class="dropdown-item" href="salaries">المرتبات</a>
                              <a class="dropdown-item" href="bonuses">المكافئات</a>
                              <a class="dropdown-item" href="reports">التقييمات</a>
                            </div>
                          </div>
                            </div>
                        </div>
        </div>
      </div>
      <div class="content-header row">
      </div>
        <div class="content-body">
          <section id="view-panel" >
              <div class="row">
                  <div class="col-lg-12 col-md-12 col-xs-12">
                    <div class="card">
                      <div class="card-header no-border-bottom">
                        <h4 class="card-title">نظرة عامة</h4>
                        <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                        <div class="heading-elements">
                          <ul class="list-inline mb-0">
                            <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                            <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                          </ul>
                        </div>
                      </div>
                      <div class="card-body collapse in">
                        <div class="card-block">
                          <canvas id="times" class="mb-1" style="height:300px !important; width:100%;"></canvas>
                          <div class="row">
                              <div class="col-lg-4 col-md-6 col-xs-12 border-right-blue-grey border-right-lighten-3  flexed-row flexed-centered flexed-vcentered">
                                <div class="float-xs-left pl-2">
                                  <span class="font-large-2 text-bold-300 primary">589</span>
                                </div>
                                <div class="float-xs-left ml-1">
                                  <span class="blue-grey darken-1 block">اجمالي</span>
                                  <span class="blue-grey darken-1 block">الحضور</span>
                                </div>
                              </div>
                              <div class="col-lg-4 col-md-6 col-xs-12 border-right-blue-grey border-right-lighten-3  flexed-row flexed-centered flexed-vcentered">
                                <div class="float-xs-left pl-2">
                                  <span class="font-large-2 text-bold-300 danger">36</span>
                                </div>
                                <div class="float-xs-left ml-1">
                                  <span class="blue-grey darken-1 block">اجمالي</span>
                                  <span class="blue-grey darken-1 block">الغياب</span>
                                </div>
                              </div>
                              <div class="col-lg-4 col-md-6 col-xs-12 flexed-row flexed-centered flexed-vcentered">
                                <div class="float-xs-left pl-2">
                                  <span class="font-large-2 text-bold-300 success">77%</span>
                                </div>
                                <div class="float-xs-left ml-1">
                                  <span class="blue-grey darken-1 block">معدل</span>
                                  <span class="blue-grey darken-1 block">الالتزام</span>
                                </div>
                              </div>
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
        
        
                    <div class="row match-height">
                  <div class="col-xl-6 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                        <h4 class="card-title">أعلى الموظفين التزاما</h4>
                      </div>
        
                      <div class="card-body">
                        <div class="table-responsive table-outer">
                            <table class="table table-bordered right mb-0 ">
                              <thead>
                                <tr>
                                  <th>اسم الموظف</th>
                                  <th>الحضور</th>
                                  <th>الغياب</th>
                                  <th>الالتزام</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>12</td>
                                  <td>98.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>12</td>
                                  <td>98.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>12</td>
                                  <td>98.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>12</td>
                                  <td>98.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>12</td>
                                  <td>98.2%</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                      </div>
                    </div>
                  </div>
                    <div class="col-xl-6 col-lg-12">
                    <div class="card" >
                      <div class="card-header">
                        <h4 class="card-title">أقل الموظفين التزاما</h4>
                      </div>
                      <div class="card-body">
                        <div class="table-responsive table-outer">
                            <table class="table table-bordered right mb-0">
                              <thead>
                                <tr>
                                  <th>اسم الموظف</th>
                                  <th>الحضور</th>
                                  <th>الغياب</th>
                                  <th>الالتزام</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>60</td>
                                  <td>10.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>60</td>
                                  <td>10.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>60</td>
                                  <td>10.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>60</td>
                                  <td>10.2%</td>
                                </tr><tr>
                                  <td>ريان كمال فهمي</td>
                                  <td>76</td>
                                  <td>60</td>
                                  <td>10.2%</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                      </div>
                    </div>
                  </div>
                </div>
        
        
                    <div class="row">
                        <div class="col-xs-12 col-lg-12">
                      <div class="card">
                        <div class="card-header">
                          <h4 class="card-title">كشف الحضور والانصراف</h4>
                          <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                          <div class="heading-elements">
                            <ul class="list-inline mb-0">
                              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                              <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                            </ul>
                          </div>
                        </div>
                        <div class="card-body collapse in">
                            <div class="card-block card-dashboard" style="padding-top: 0px;">
                            <table class="table table-striped table-bordered base-style">
                              <thead>
                                <tr>
                                  <th>تاريخ اليوم</th>
                                  <th>اسم الموظف</th>
                                  <th>ميعاد الدخول</th>
                                  <th>الدخول</th>
                                  <th>ميعاد الخروج</th>
                                  <th>الخروج</th>
                                  <th>معدل الالتزام</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr><tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr><tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr><tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr><tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr><tr>
                                    <td>15/07/2017</td>
                                    <td>ريان كمال</td>
                                    <td>9:00 ص</td>
                                    <td>9:30 ص</td>
                                    <td>5:30 م</td>
                                    <td>5:22 م</td>
                                    <td>95%</td>
                                </tr>
        
        
                              </tbody>
                              <tfoot>
                                <tr>
                                  <th>تاريخ اليوم</th>
                                  <th>اسم الموظف</th>
                                  <th>ميعاد الدخول</th>
                                  <th>الدخول</th>
                                  <th>ميعاد الخروج</th>
                                  <th>الخروج</th>
                                  <th>معدل الالتزام</th>
                                </tr>
                              </tfoot>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                    </div>
                </div>
          </section>


          <section id="settings-panel" style="display:none">
            <div class="row flexed-column flexed-vcentered">
              <div class="col-md-9">
                <p>
                  * 
                  يمكنك  تعيين مواعيد الحضور والانصراف حسب الوظيفة فقط قم بالضغط على اسم الوظيفة وحدد مواعيد الحضور والانصراف 
                </p>
                  <div class="cf mb-1">
                      <section class="plan">
                        <input type="radio" name="radio2" id="4" value="4">
                        <label class="free-label four col" for="4">
                          <p class="no-margin">
                            وظيفة 1
                          </p>
                        </label>
  
                        <input type="radio" name="radio2" id="5" value="5">
                        <label class="free-label four col" for="5">
                          <p class="no-margin">
                            وظيفة 2
                          </p>
                        </label>
  
                        <input type="radio" name="radio2" id="6" value="6">
                        <label class="free-label four col" for="6">
                          <p class="no-margin">
                            وظيفة 3
                          </p>
                        </label>
                        </section>
                      
                    </div>

                <div class="card border-left-primary border-left-3">
                  <div class="card-body">
                    <div class="card-block">
                      <p>
                        قم بتحديد المواعيد الخاصة بوظيفة المهممنين
                      </p>
                      <hr>
                      <div class="row">
                        <div class="col-md-5">
                            <fieldset>
                              <label>
                                موعد الدخول
                              </label>
                                <div class="input-group">
                                  <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                  <input type="text" class="form-control" placeholder="موعد الدخول" aria-describedby="basic-addon1">
                                </div>
                              </fieldset>
                        </div>
                        <div class="col-md-2">
                          <p style="    text-align: center;margin-top: 35px;">
                          حتى
                        </p>
                        </div>
                        <div class="col-md-5">
                            <fieldset>
                                <label>
                                  موعد الخروج
                                </label>
                                  <div class="input-group">
                                    <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                    <input type="text" class="form-control" placeholder="موعد الخروج" aria-describedby="basic-addon1">
                                  </div>
                                </fieldset>
                        </div>
                      </div>
                      <div class=" mt-1"><button type="button" class="btn btn-primary float-xs-right"> حفظ التغييرات</button></div>
                      



                    </div>
                  </div>
                </div>
              </div>


              <div class="col-md-9">
                <p>
                  * 
                  يمكنك تعيين مواعيد الحضور والانصراف حسب دوريات الموظفين وذلك عن طريق انشاء دوريات عمل متعددة
                </p>
                <div class="flexed-row flexed-between">
                  <p>
                    الدوريات
                  </p>
                  <a href="#" class="primary">
                    <i class="fa fa-plus"></i>
                    اضافة دورية جديدة
                  </a>
                </div>
                <div class="cf">
                    <section class="plan">
                      <input type="radio" name="radio1" id="1" value="1">
                      <label class="free-label four col" for="1">
                        <p class="no-margin">
                          دورية الصباح
                        </p>
                        <small class="text-muted">
                          من 3.00 صباحا الى 9.00 مساءا
                        </small>
                      </label>

                      <input type="radio" name="radio1" id="2" value="2">
                      <label class="free-label four col" for="2">
                        <p class="no-margin">
                          دورية المساء
                        </p>
                        <small class="text-muted">
                          من 3.00 صباحا الى 9.00 مساءا
                        </small>
                      </label>

                      <input type="radio" name="radio1" id="3" value="3">
                      <label class="free-label four col" for="3">
                        <p class="no-margin">
                          دورية الليل
                        </p>
                        <small class="text-muted">
                          من 3.00 صباحا الى 9.00 مساءا
                        </small>
                      </label>
                      </section>
                    
                  </div>

                  <div class="mt-1">
                    <div class="row">
                      <div class="col-md-8">
                        <div class="card border-left-primary border-left-3">
                          <div class="card-body">
                            <div class="card-block">
                              <div class="flexed-row flexed-between">
                                  <p class="no-margin">
                                      * الدورة الصباحية
                                    </p>
                                    <a href="#" class="danger">
                                      <i class="fa fa-times-circle"></i>
                                       الغاء الدورة !
                                    </a>
                              </div>
                              <hr>
                              <div class="row mb-1">
                                  <div class="col-md-5">
                                      <fieldset>
                                        <label>
                                          موعد الدخول
                                        </label>
                                          <div class="input-group">
                                            <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                            <input type="text" class="form-control" placeholder="موعد الدخول" aria-describedby="basic-addon1">
                                          </div>
                                        </fieldset>
                                  </div>
                                  <div class="col-md-2">
                                    <p style="    text-align: center;margin-top: 35px;">
                                    حتى
                                  </p>
                                  </div>
                                  <div class="col-md-5">
                                      <fieldset>
                                          <label>
                                            موعد الخروج
                                          </label>
                                            <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                              <input type="text" class="form-control" placeholder="موعد الخروج" aria-describedby="basic-addon1">
                                            </div>
                                          </fieldset>
                                  </div>
                                </div>
                                <hr>
                                <div class="flexed-row flexed-between">
                                  <p>
                                     أسماء الموظفين المدرجين في الدورية
                                  </p>
                                  <b>
                                    7 موظفين 
                                  </b>
                                </div>
                                <div class="preview_item_list">
                                  <span>
                                    عمر جاد الله
                                  </span>
                                  <span>
                                    عمر جاد الله
                                  </span>
                                  <span>
                                    عمر جاد الله
                                  </span>
                                  <span>
                                    عمر جاد الله
                                  </span>
                                  <span>
                                    عمر جاد الله
                                  </span>
                                </div>
                                <div class=" mt-1"><button type="button" class="btn btn-primary float-xs-right"> حفظ التغييرات</button></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                          <div class="card">
                            <div class="card-body">
                              <div class="card-block">
                                <p>
                                  * قائمة الموظفين
                                </p>
                                <hr>
                                <input class="form-control" placeholder="ابحث عن اسم الموظف هنا">
                                <ul class="nav nav-pills nav-stacked nav-pill-toolbar mt-1">
                                    <li class="nav-item">
                                      <a class="nav-link" id="base-pillOpt31" data-toggle="pill" href="#pillOpt31" aria-expanded="false">احمد عمر</a>
                                    </li>
                                    <li class="nav-item">
                                      <a class="nav-link" id="base-pillOpt32" data-toggle="pill" href="#pillOpt32" aria-expanded="false">مصطفى خاطر</a>
                                    </li>
                                    <li class="nav-item">
                                      <a class="nav-link" id="base-pillOpt33" data-toggle="pill" href="#pillOpt33" aria-expanded="false">رنا جادالله</a>
                                    </li>
                                  </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                  </div>
              </div>

              <div class="col-md-9">
                <p>
                  * 
                  يمكنك تعيين مواعيد الحضور والانصراف لكل موظف بشكل منفرد فقط قم باختيار اسم الموظف من القائمة اليمني وقم بتحديد المواعيد
                </p>
                <div class="row">
                  <div class="col-md-4">
                    <div class="card">
                      <div class="card-body">
                        <div class="card-block">
                          <p>
                            * قائمة الموظفين
                          </p>
                          <hr>
                          <input class="form-control" placeholder="ابحث عن اسم الموظف هنا">
                          <ul class="nav nav-pills nav-stacked nav-pill-toolbar mt-1">
                              <li class="nav-item">
                                <a class="nav-link" id="base-pillOpt31" data-toggle="pill" href="#pillOpt31" aria-expanded="false">احمد عمر</a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" id="base-pillOpt32" data-toggle="pill" href="#pillOpt32" aria-expanded="false">مصطفى خاطر</a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" id="base-pillOpt33" data-toggle="pill" href="#pillOpt33" aria-expanded="false">رنا جادالله</a>
                              </li>
                            </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="card border-left-primary border-left-3">
                      <div class="card-body">
                        <div class="card-block">
                          <p>
                            <i class="fa fa-user-circle"></i>
                             ريان كمال فهمي
                          </p>
                          <hr>
                          <div class="alert alert-warning mb-2" role="alert">
                              هذا الموظف موجود داخل قائمة الموظفين بالدورية المسائية
                            </div>
                          <div class="row mb-1">
                              <div class="col-md-5">
                                  <fieldset>
                                    <label>
                                      موعد الدخول
                                    </label>
                                      <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                        <input type="text" class="form-control" placeholder="موعد الدخول" aria-describedby="basic-addon1">
                                      </div>
                                    </fieldset>
                              </div>
                              <div class="col-md-2">
                                <p style="    text-align: center;margin-top: 35px;">
                                حتى
                              </p>
                              </div>
                              <div class="col-md-5">
                                  <fieldset>
                                      <label>
                                        موعد الخروج
                                      </label>
                                        <div class="input-group">
                                          <span class="input-group-addon" id="basic-addon1"><i class="icon-clock"></i></span>
                                          <input type="text" class="form-control" placeholder="موعد الخروج" aria-describedby="basic-addon1">
                                        </div>
                                      </fieldset>
                              </div>
                            </div>
                            
                              <p class="no-margin">
                                تغيير مواعيد الدخول والخروج سيئدي الى خروجه من الدورية المسائية
                              </p>

                              <div class=" mt-1">
                                <button type="button" class="btn btn-primary float-xs-right">
                                  حفظ التغييرات
                                </button>
                              </div>


                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-9">
                <hr>
              </div>

              <div class="col-md-9">
                <p>
                  * 
                  يمكنك تعيين القوانين لمعاقبة أو مكافأة الموظفين حين تأخرهم عن الحضور في المواعيد المحددة أو الانصراف قبل ميعاد انصرافهم المحدد أو مكافأتهم نظير عملهم لساعات اضافية 
                </p>
                <div class="flexed-row flexed-between">
                  <p class="no-margin">
                    القوانين المدرجة ( صفر ) 
                  </p>
                  <a class="primary new_law_btn">
                    <i class="fa fa-plus-circle"></i>
                    قانون جديد
                  </a>
                </div>
              </div>


              
            </div>
          </section>
            

        
    </div>
</div>
@{import('vendors.min.js')};
<script>
$(function(){
  var ctx = document.getElementById("times").getContext('2d');
  var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيه"],
          datasets: [
            {
              label: 'الحضور ',
              data: [90, 95, 97, 96, 97, 94],
              backgroundColor: '#daf2f2',
              borderColor: '#76d0d0',
              borderWidth: 1
          },
          {
              label: 'الغياب ',
              data: [10, 5, 3, 4, 3, 6],
              backgroundColor: '#ffdfe5',
              borderColor: '#fe6c8b',
              borderWidth: 1
          }
          ]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          },
          legend: {
            labels: {
                // This more specific font property overrides the global property
                fontColor: '#404E67',
                fontFamily: 'dubai'
            }
        },
        tooltips: {
          bodyFontFamily: 'dubai',
          titleFontFamily: 'dubai'
        }
      }
  });


  /**
   * settings panel
   * */
  $('.settings-btn').on('click',function(){
    $('#view-panel').fadeOut(500,function(){
      $('#settings-panel').fadeIn(500);
    });
  });




  $('#new_law').iziModal({
    title: 'اضافة قانون جديد',
    subtitle: '',
    headerColor: 'rgb(54, 68, 94)',
    width: 600,
    zindex:10000,
    onOpening: function(modal){
      
        modal.startLoading();
        $.ajax({
    method:'get',
    url:'/new_law',
    success:function(data){
      $("#new_law .iziModal-content").html(data);
      modal.stopLoading();
    }
  });
    }
  });


  $('.new_law_btn').on('click',function(){
    $("#new_law").iziModal('open');
  });





  /**
   * new law controller
   * */

   $(document).on('click','.add_new_law_role',function(){
     var law_type = $('input[name="law_type"]:checked').val();
     if(!law_type){
       alert('you should choose law type');
     }else{
      var roles_length = parseInt($('.roles-container .role').length);
      var come_role ;
      var leave_role;
       come_role = '<div class="role">';
        if(roles_length > 0){
          come_role = come_role + '<hr>';
        }
      come_role = come_role + '<div id="role-'+parseInt(roles_length+1)+'" class=" border-left-primary border-left-3 pl-1"><div class="flexed-row flexed-vcentered"><span> حال تأخر الموظف عن مدة</span><div class="input-group ml-1 mr-1" style="width:120px;"> <input type="text" class="form-control" placeholder="xxx" aria-describedby="basic-addon2"><span class="input-group-addon" id="basic-addon2">دقيقة</span></div><span> يتم تطبيق</span> <select class="form-control ml-1 mr-1" style="width:120px;"><option>اختر</option><option>ادراج في التقارير فقط</option> </select></div><div class="flexed-row flexed-vcentered "><span> مع خصم</span><div class="radio-group"> <input type="radio"  class="fee_type" id="option-a'+parseInt(roles_length+1)+'" name="selector-'+parseInt(roles_length+1)+'" value="value"> <label for="option-a'+parseInt(roles_length+1)+'">قيمة</label> <input type="radio" class="fee_type" id="option-b'+parseInt(roles_length+1)+'" name="selector-'+parseInt(roles_length+1)+'" value="percent"> <label for="option-b'+parseInt(roles_length+1)+'">نسبة</label></div><div class="value_container flexed-row flexed-vcentered"></div></div><div class="flexed-row" style="justify-content: flex-end;"><a class="primary mr-1 agregate_role "><i class="ft-refresh-cw"></i> تدريج الحالة</a><a class="danger remove_low_role"><i class="ft-trash-2"></i> حذف الحالة</a></div><div class="gradation-container"></div></div></div>';
      
       leave_role = '<div class="role">';
          if(roles_length > 0){
          leave_role = leave_role + '<hr>';
        }
        leave_role = leave_role + '<div id="role-'+parseInt(roles_length+1)+'" class=" border-left-primary border-left-3 pl-1"><div class="flexed-row flexed-vcentered"> <span> حال انصراف الموظف بمدة </span><div class="input-group ml-1 mr-1" style="width:120px;"> <input type="text" class="form-control" placeholder="xxx" aria-describedby="basic-addon2"> <span class="input-group-addon" id="basic-addon2">دقيقة</span></div> <span> يتم تطبيق </span> <select class="form-control ml-1 mr-1" style="width:120px;"><option>اختر</option><option>ادراج في التقارير فقط</option> </select></div><div class="flexed-row flexed-vcentered "> <span> مع خصم </span><div class="radio-group"> <input type="radio"  class="fee_type" id="option-a'+parseInt(roles_length+1)+'" name="selector-'+parseInt(roles_length+1)+'" value="value"> <label for="option-a'+parseInt(roles_length+1)+'">قيمة</label> <input type="radio"  class="fee_type" id="option-b'+parseInt(roles_length+1)+'" name="selector-'+parseInt(roles_length+1)+'" value="percent"> <label for="option-b'+parseInt(roles_length+1)+'">نسبة</label></div><div class="value_container flexed-row flexed-vcentered"></div></div><div class="flexed-row" style="justify-content: flex-end;"> <a class="primary mr-1 agregate_role "><i class="ft-refresh-cw"></i> تدريج الحالة</a><a class="danger remove_low_role"> <i class="ft-trash-2"></i> حذف الحالة</a></div><div class="gradation-container"></div></div></div>';
      
      if(law_type == 'come'){
        $('.roles-container').append(come_role);
      }else if(law_type == 'leave'){
        $('.roles-container').append(leave_role);
      }
      check_roles();
     }
     
   });

   $(document).on('click','.remove_low_role',function(){
     var that = this;
     $(this).parents('.role div:first-of-type').css('border-color','#fe6e82');
      setTimeout(function(){
        $(that).parents('.role').remove();
        check_roles();
      },300);
       
   });

   function check_roles(){
    var roles_length = parseInt($('.roles-container .role').length);
    if(roles_length > 0){
      $('.roles_empty').remove();
      $('.roles-container .role:first-of-type hr').remove();
      $('input[name="law_type"]:not(:checked)').attr('disabled','disabled');
    }else{
      var roles_empty = '<div class=" roles_empty flexed-column flexed-vcentered flexed-centered mb-1 p-1 pt-3 pb-3" style="background-color:#ECEFF1"><p>قم بإضافة الحالة الأولى لهذا القانون الجديد الآن</p><button type="button" class="btn btn-primary add_new_law_role">اضافة الحالة الأولى</button></div>';
      $('#roles_container').append(roles_empty);
      $('input[name="law_type"]').removeAttr('disabled');
    }
    $('.roles_length').text(roles_length);
   }

   $(document).on('change','.fee_type',function(){
     var form_1= '<input class="form-control" style="width:75px" placeholder="قيمة" /> &nbsp; جنيه';
     var roles_length = parseInt($('.roles-container .role').length);
     var gradation_length = $(this).parents('.role').find('.gradation-container .gradation').length;
     if($(this).hasClass('gradation_fee')){
      var form_2= '<div  class="radio-group"> <input type="radio" id="g-'+gradation_length+'" name="gradation-'+gradation_length+'"> <label for="g-'+gradation_length+'">25%</label> <input type="radio" id="g2-'+gradation_length+'" name="gradation-'+gradation_length+'"> <label for="g2-'+gradation_length+'">50%</label> <input type="radio" id="g3-'+gradation_length+'" name="gradation-'+gradation_length+'"> <label for="g3-'+gradation_length+'">100%</label></div>أو &nbsp;<div> <input class="form-control" style="width:75px" placeholder="نسبة %" /></div></div>';
     }else{
      var form_2= '<div  class="radio-group"> <input type="radio" id="r-'+roles_length+'" name="role-'+roles_length+'"> <label for="r-'+roles_length+'">25%</label> <input type="radio" id="r2-'+roles_length+'" name="role-'+roles_length+'"> <label for="r2-'+roles_length+'">50%</label> <input type="radio" id="r3-'+roles_length+'" name="role-'+roles_length+'"> <label for="r3-'+roles_length+'">100%</label></div>أو &nbsp;<div> <input class="form-control" style="width:75px" placeholder="نسبة %" /></div></div>';
     }
  
     if($(this).val() == 'value'){
       if($(this).hasClass('gradation_fee')){
        $(this).parents('.gradation').find('.value_container').html(form_1);
       }else{
        $(this).parents('.role').find('.value_container').eq(0).html(form_1);
       }
     }else if($(this).val() == 'percent'){
      if($(this).hasClass('gradation_fee')){
        $(this).parents('.gradation').find('.value_container').html(form_2);
       }else{
        $(this).parents('.role').find('.value_container').eq(0).html(form_2);
       }
     }
   });


   $(document).on('click','.agregate_role',function(){
     var border;
     var word;
     var gradation_length = $(this).parents('.role').find('.gradation-container .gradation').length;
     if(gradation_length < 3){
     switch(gradation_length){
       case gradation_length = 0:
       border = 'danger';
       word = 'الثانية';
       break;
       case gradation_length = 1:
       border = 'blue';
       word = 'الثالثة';
       break;
       case gradation_length = 2:
       border = 'warning';
       word = 'الرابعة';
       break;
     }
     var form = '<div class="gradation"><div id="gradation-'+parseInt(gradation_length+1)+'" class=" border-left-'+border+' border-left-3 pl-1"><div class="flexed-row flexed-vcentered"><span>  في المرة '+word+' يتم تطبيق </span> <select class="form-control ml-1 mr-1" style="width:120px;"><option>اختر</option><option>ادراج في التقارير فقط</option> </select></div><div class="flexed-row flexed-vcentered "><span> مع خصم</span><div class="radio-group"> <input type="radio" class="fee_type gradation_fee" id="option-g'+parseInt(gradation_length+1)+'" name="selector-g'+parseInt(gradation_length+1)+'" value="value"> <label for="option-g'+parseInt(gradation_length+1)+'">قيمة</label> <input type="radio" class="fee_type gradation_fee" id="option-gf'+parseInt(gradation_length+1)+'" name="selector-g'+parseInt(gradation_length+1)+'" value="percent"> <label for="option-gf'+parseInt(gradation_length+1)+'">نسبة</label></div><div class="value_container flexed-row flexed-vcentered"></div></div></div> </div>   ';
     $(this).parents('.role').find('.gradation-container').append(form);
    }

   });



});
</script>
