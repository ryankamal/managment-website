@{import('pages/users.min.css','custom_plugins/optionAppender.css','forms/selects/select2.min.css')}
<style>

.modal-footer {
  border: 0;
}

.select2-dropdown{
    z-index: 10000000;
  }

</style>

<div class="app-content content container-fluid">
   <div class="content-wrapper">
     <div class="content-header row">
       <div class="content-header-left col-md-6 col-xs-12 mb-2">
         <div class="row breadcrumbs-top">
           <div class="breadcrumb-wrapper col-xs-12">
             <ol class="breadcrumb">
               <li class="breadcrumb-item"><a href="index">الرئيسية</a>
               </li>
               <li class="breadcrumb-item"><a href="#">ادارة التشغيل</a>
               </li>
               <li class="breadcrumb-item"><a href="employees">الموظفين</a>
               </li>
               <li class="breadcrumb-item active">المكافآت
               </li>
             </ol>
           </div>
         </div>
         <h3 class="content-header-title mb-0">المكافآت</h3>
       </div>
       <div class="content-header-right col-md-6 col-xs-12">
           <div class="form-group" style="text-align: left">
             <!-- button group -->
             <div class="btn-group" role="group" aria-label="Basic example">
                <div class="btn-group">
                    <button type="button" class="btn btn-icon btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bars"></i></button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="employees_times">الحضور والانصراف</a>
                      <a class="dropdown-item" href="vacations">الأجازات</a>
                      <a class="dropdown-item" href="salaries">المرتبات</a>
                      <a class="dropdown-item" href="bonuses">المكافئات</a>
                      <a class="dropdown-item" href="reports">التقييمات</a>
                    </div>
                  </div>
                  <button type="button" class="btn btn-secondary new_bonus_event_btn" >
                      <i class="icon-calendar icon-right"></i>
                      جدولة مكافأة جديدة</button>
                  <button type="button" class="btn btn-secondary new_emp_bonus_btn" >
                      <i class="ft-plus icon-right"></i>
                    اضافة مكافأة لموظف</button>
                  

             </div>
            </div>
           </div>
        </div>
        <div class="content-header row">
        </div>
        <div class="content-body">
            <div class="row">
                <div class="col-xs-12">
                  <div class="card bg-gradient-x-primary">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-lg-4 col-sm-12 border-right-primary border-right-lighten-3">
                          <div class="card-block text-xs-center">
                            <h1 class="display-4 white"><i class="icon-users font-large-2"></i> 1579</h1>
                            <span class="white">اجمالي الموظفين</span>
                          </div>
                        </div>
                        <div class="col-lg-4 col-sm-12 border-right-primary border-right-lighten-3">
                          <div class="card-block text-xs-center">
                            <h1 class="display-4 white"> 15201</h1>
                            <span class="white">اجمالي المكافآت</span>
                          </div>
                        </div>
                        <div class="col-lg-4 col-sm-12">
                          <div class="card-block text-xs-center">
                            <h1 class="display-4 white"> 1621</h1>
                            <span class="white">مكافآت مستحقة</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                  <div class="col-xs-12 col-lg-12">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">المكافآت</h4>
                    <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                    <div class="heading-elements">
                      <ul class="list-inline mb-0">
                        <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                        <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="card-body collapse in">
                      <div class="card-block card-dashboard" style="padding-top: 0px;">
                      <table class="table table-striped table-bordered base-style ">
                        <thead>
                          <tr>
                            <th>كود</th>
                            <th>اسم الموظف</th>
                            <th>تاريخ التعيين</th>
                            <th>اجمالى المكافآت</th>
                            <th>المكافآت المستحقة</th>
                            <th>تاريخ آخر مكافأة</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                              <td>101</td>
                              <td>ريان كمال فهمي</td>
                              <th>11/8/2017</th>
                              <td>230</td>
                              <td>40</td>
                              <td>1/11/2017
                          </tr>
                          <tr>
                              <td>101</td>
                              <td>ريان كمال فهمي</td>
                              <th>11/8/2017</th>
                              <td>230</td>
                              <td>40</td>
                              <td>1/11/2017
                          </tr>
                          <tr>
                              <td>101</td>
                              <td>ريان كمال فهمي</td>
                              <th>11/8/2017</th>
                              <td>230</td>
                              <td>40</td>
                              <td>1/11/2017
                          </tr>
                          <tr>
                              <td>101</td>
                              <td>ريان كمال فهمي</td>
                              <th>11/8/2017</th>
                              <td>230</td>
                              <td>40</td>
                              <td>1/11/2017
                          </tr>
                        </tbody>
                        <tfoot>
                          <tr>
                            <th>كود</th>
                            <th>اسم الموظف</th>
                            <th>تاريخ التعيين</th>
                            <th>اجمالى المكافآت</th>
                            <th>المكافآت المستحقة</th>
                            <th>تاريخ آخر مكافأة</th>
                          </tr>
                        </tfoot>
                      </table>
                    </div>
                  </div>
        
        
        
                </div>
           </div>
        </div>



          <div class="row match-height">
        <div class="col-xl-6 col-lg-12">
          <div class="card">
              <div class="card-header">
              <h4 class="card-title">أعلى الموظفين حصولا على مكافآت</h4>
            </div>

            <div class="card-body">
              <div class="table-responsive table-outer">
                  <table class="table table-bordered  mb-0 ">
                    <thead>
                      <tr>
                        <th>اسم الموظف</th>
                        <th>اجمالي المكافآت</th>
                        <th>
                          قيمة آخر مكافأة
                        </th>
                        <th>
                          تاريخ آخر مكافأة
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          ريان كمال فهمي
                        </td>
                        <td>
                          6500 جنيه
                        </td>
                        <td>
                          1200 جنيه
                        </td>
                        <td>
                          12-09-2017
                        </td>
                      </tr>
                      <tr>
                          <td>
                            ريان كمال فهمي
                          </td>
                          <td>
                            6500 جنيه
                          </td>
                          <td>
                            1200 جنيه
                          </td>
                          <td>
                            12-09-2017
                          </td>
                        </tr>
                        <tr>
                            <td>
                              ريان كمال فهمي
                            </td>
                            <td>
                              6500 جنيه
                            </td>
                            <td>
                              1200 جنيه
                            </td>
                            <td>
                              12-09-2017
                            </td>
                          </tr>
                          <tr>
                              <td>
                                ريان كمال فهمي
                              </td>
                              <td>
                                6500 جنيه
                              </td>
                              <td>
                                1200 جنيه
                              </td>
                              <td>
                                12-09-2017
                              </td>
                            </tr>
                            <tr>
                                <td>
                                  ريان كمال فهمي
                                </td>
                                <td>
                                  6500 جنيه
                                </td>
                                <td>
                                  1200 جنيه
                                </td>
                                <td>
                                  12-09-2017
                                </td>
                              </tr>

                    </tbody>
                  </table>
                </div>
            </div>
          </div>
        </div>
          <div class="col-xl-6 col-lg-12">
          <div class="card" >
            <div class="card-header">
              <h4 class="card-title">مكافآت مجدولة<h4>
            </div>
            <div class="card-body">
              <div class="table-responsive table-outer">
                  <table class="table table-bordered  mb-0">
                    <thead>
                      <tr>
                        <th>اسم المكافآة</th>
                        <th>تاريخ الاستحقاق</th>
                        <th>النوع</th>
                        <th>القيمة</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>الجودة</td>
                        <td>12-07-2018</td>
                        <td>مخصصة</td>
                        <td>40</td>
                      </tr>
                      <tr>
                          <td>الجودة</td>
                          <td>12-07-2018</td>
                          <td>مخصصة</td>
                          <td>40</td>
                        </tr>
                        <tr>
                            <td>الجودة</td>
                            <td>12-07-2018</td>
                            <td>مخصصة</td>
                            <td>40</td>
                          </tr>
                          <tr>
                              <td>الجودة</td>
                              <td>12-07-2018</td>
                              <td>مخصصة</td>
                              <td>40</td>
                            </tr>
                            <tr>
                                <td>الجودة</td>
                                <td>12-07-2018</td>
                                <td>مخصصة</td>
                                <td>40</td>
                              </tr>
                    </tbody>
                  </table>
                </div>
            </div>
          </div>
        </div>
      </div>



      @{import('vendors.min.js','forms/select/select2.full.min.js')}

<script>
$(function(){
  $('#new_emp_bonus').iziModal({
    title: 'اضافة مكافأة لموظف',
    subtitle: '',
    headerColor: 'rgb(54, 68, 94)',
    width: 400,
    zindex:10000,
    onOpening: function(modal){
      
        modal.startLoading();
        $.ajax({
    method:'get',
    url:'/new_emp_bonus',
    success:function(data){
      $("#new_emp_bonus .iziModal-content").html(data);
      modal.stopLoading();
    }
  });
    },
    onOpened: function(){
      
  
      //$('.select2').select2();
    }
  });
  
  
  $(document).on('click','.new_emp_bonus_btn',function(){
    $("#new_emp_bonus").iziModal('open');
  });

  /**
   * bonus event
   * */
   $('#new_bonus_event').iziModal({
  title: 'جدولة مكافأة جديدة',
  subtitle: '',
  headerColor: 'rgb(54, 68, 94)',
  width: 400,
  zindex:10000,
  onOpening: function(modal){
    
      modal.startLoading();
      $.ajax({
  method:'get',
  url:'/new_bonus_event',
  success:function(data){
    $("#new_bonus_event .iziModal-content").html(data);
    modal.stopLoading();
  }
});
  },
  onOpened: function(){
    

    $('.select2').select2();
  }
});


$(document).on('click','.new_bonus_event_btn',function(){
  $("#new_bonus_event").iziModal('open');
});


$(document).on('change','input[name="type-trigger"]',function(){
        var val = $(this).val();
        if(val == 'private'){
          $('fieldset[name="type-input"]').show();
        }else{
          $('fieldset[name="type-input"]').val('').hide();
        }
      });


$(document).on('change','select[name="type-attach"]',function(){
        var val = $(this).val();
        //alert(val);
        if(val == 'group-of-employees'){
          $('.group-of-employees-field').show();
          $('.jobname-field').hide();
          $('.shift-field').hide();
        }else if(val == 'jobname'){
          $('.group-of-employees-field').hide();
          $('.shift-field').hide();
          $('.jobname-field').show();

        }else if(val == 'shift'){
          $('.shift-field').show();
          $('.group-of-employees-field').hide();
          $('.jobname-field').hide();
          //$('fieldset[name="type-input"]').val('').hide();
        }
      });


$(document).on('change','.time-controller',function(){
  var val = $(this).val();
  if(val == 'date'){
    $('.date_date').show();
    $('.data_month').hide();
    $('.date_other').hide();
  }else if(val == 'datemonth'){
    $('.data_month').show();
    $('.date_date').hide();
    $('.date_other').hide();
  }else if(val == 'dateevery' || val == 'dateafter'){
    $('.date_other').show();
    $('.data_month').hide();
    $('.date_date').hide();
  }else{
    $('.data_month').hide();
    $('.date_date').hide();
    $('.date_other').hide();

  }
});

$(document).on('change','input[name="value-trigger"]',function(){
  var val = $(this).val();
  if(val == 'value'){
    $('.value_value').show();
    $('.value_percent').hide();
  }else if(val == 'percent'){
    $('.value_value').hide();
    $('.value_percent').show();
  }
});
});


</script>

